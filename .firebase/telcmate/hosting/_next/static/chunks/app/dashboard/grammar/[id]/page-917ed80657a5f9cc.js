(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[579],{301:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,q:()=>s});var a=r(2149),n=r(8081);function s(e,t){let r=a.createContext(t),s=e=>{let{children:t,...s}=e,l=a.useMemo(()=>s,Object.values(s));return(0,n.jsx)(r.Provider,{value:l,children:t})};return s.displayName=e+"Provider",[s,function(n){let s=a.useContext(r);if(s)return s;if(void 0!==t)return t;throw Error(`\`${n}\` must be used within \`${e}\``)}]}function l(e,t=[]){let r=[],s=()=>{let t=r.map(e=>a.createContext(e));return function(r){let n=r?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return s.scopeName=e,[function(t,s){let l=a.createContext(s),c=r.length;r=[...r,s];let i=t=>{let{scope:r,children:s,...i}=t,o=r?.[e]?.[c]||l,d=a.useMemo(()=>i,Object.values(i));return(0,n.jsx)(o.Provider,{value:d,children:s})};return i.displayName=t+"Provider",[i,function(r,n){let i=n?.[e]?.[c]||l,o=a.useContext(i);if(o)return o;if(void 0!==s)return s;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:r,scopeName:a})=>{let n=r(e)[`__scope${a}`];return{...t,...n}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(s,...t)]}},459:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},493:(e,t,r)=>{"use strict";function a(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),!1===r||!a.defaultPrevented)return t?.(a)}}r.d(t,{m:()=>a})},1107:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1251:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1411:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]])},1441:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3077:(e,t,r)=>{"use strict";r.d(t,{N:()=>n});var a=r(2149),n=globalThis?.document?a.useLayoutEffect:()=>{}},4004:(e,t,r)=>{"use strict";r.d(t,{jH:()=>s});var a=r(2149);r(8081);var n=a.createContext(void 0);function s(e){let t=a.useContext(n);return e||t||"ltr"}},4082:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var a=r(8081),n=r(2149),s=r(9651),l=r(7950),c=r.n(l),i=r(3621),o=r(6535),d=r(5160),u=r(6810),m=r(1251),x=r(7188),h=r(9076),p=r(4535),f=r(5904),b=r(5844),v=r(5781),j=r(6017);function k(e){var t,r,l;let{params:k}=e,y=(0,s.useRouter)(),{toast:g}=(0,b.dj)(),[N,A]=(0,n.useState)(null),[w,S]=(0,n.useState)(!0),[M,C]=(0,n.useState)(0),[I,E]=(0,n.useState)({}),[_,R]=(0,n.useState)(!1),[B,z]=(0,n.useState)(0),[D,W]=(0,n.useState)(!1),[P,$]=(0,n.useState)(null),[H,T]=(0,n.useState)({});(0,n.useEffect)(()=>{W("true"===localStorage.getItem("isDemo"));let e=(0,j.dg)(k.id);if(e&&"grammar"===e.type){if(A(e),C(60*e.timeLimit),"part1"===e.part){let t={};e.blanks&&e.blanks.forEach((e,r)=>{t["blank-".concat(r)]=null}),E(t)}else if("part2"===e.part){let t={};e.blanks&&e.blanks.forEach((e,r)=>{t["blank-".concat(r)]=null}),T(t)}}else g({title:"Exercise not found",description:"The requested exercise could not be found.",variant:"destructive"}),y.push("/dashboard/grammar");S(!1)},[k.id,y,g]),(0,n.useEffect)(()=>{if(!N||_)return;let e=setInterval(()=>{C(t=>t<=1?(clearInterval(e),U(),0):t-1)},1e3);return()=>clearInterval(e)},[N,_]);let G=(e,t)=>{E({...I,[e]:t})},O=(e,t,r)=>{$({word:t,index:r})},Z=e=>{e.preventDefault()},q=(e,t)=>{e.preventDefault(),P&&T({...H,[t]:P})},L=e=>{T({...H,[e]:null})},U=()=>{let e=0,t=0;"part1"===N.part?N.blanks&&N.blanks.forEach((r,a)=>{t++,I["blank-".concat(a)]===N.correctAnswers[a]&&e++}):"part2"===N.part&&N.blanks&&N.blanks.forEach((r,a)=>{var n;t++,(null===(n=H["blank-".concat(a)])||void 0===n?void 0:n.word)===r.correctWord&&e++});let r=t>0?Math.round(e/t*100):0;z(r),R(!0),g({title:"Exercise completed",description:"Your score: ".concat(r,"%")})};return w?(0,a.jsx)(v.A,{}):N?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(o.A,{}),(0,a.jsx)(i.A,{}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c(),{href:"/dashboard/grammar",children:(0,a.jsxs)(d.$,{variant:"ghost",size:"sm",className:"gap-1",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),"Back"]})}),(0,a.jsx)("h1",{className:"text-2xl font-bold",children:N.title})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-1 px-3 py-1 rounded-full ".concat(_?"bg-gray-200 text-gray-700":M<60?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:_?"Completed":(e=>{let t=Math.floor(e/60),r=e%60;return"".concat(t,":").concat(r<10?"0":"").concat(r)})(M)})]})})]}),(0,a.jsxs)(u.Zp,{className:"mb-6",children:[(0,a.jsx)(u.aR,{children:(0,a.jsx)(u.ZB,{children:"Instructions"})}),(0,a.jsx)(u.Wu,{children:(0,a.jsx)("p",{children:N.description})})]}),"part1"===N.part&&(0,a.jsxs)(u.Zp,{children:[(0,a.jsx)(u.aR,{children:(0,a.jsx)(u.ZB,{children:"Fill in the Blanks"})}),(0,a.jsx)(u.Wu,{children:(0,a.jsx)("div",{className:"prose max-w-none",children:null===(t=N.textWithBlanks)||void 0===t?void 0:t.map((e,t)=>{var r,n;return(0,a.jsx)("span",{children:"text"===e.type?e.content:(0,a.jsxs)("span",{className:"inline-block mx-1",children:[(0,a.jsxs)(f.l6,{value:(null===(r=I["blank-".concat(e.blankIndex)])||void 0===r?void 0:r.toString())||"",onValueChange:t=>G("blank-".concat(e.blankIndex),Number(t)),disabled:_,children:[(0,a.jsx)(f.bq,{className:"w-[120px] h-8 inline-flex",children:(0,a.jsx)(f.yv,{placeholder:"Select..."})}),(0,a.jsx)(f.gC,{children:null===(n=N.blanks[e.blankIndex])||void 0===n?void 0:n.options.map((e,t)=>(0,a.jsx)(f.eb,{value:t.toString(),children:e},t))})]}),_&&(0,a.jsx)("span",{className:"ml-1",children:I["blank-".concat(e.blankIndex)]===N.correctAnswers[e.blankIndex]?(0,a.jsx)(h.A,{className:"inline h-4 w-4 text-green-500"}):(0,a.jsx)(p.A,{className:"inline h-4 w-4 text-red-500"})})]})},t)})})})]}),"part2"===N.part&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(u.Zp,{children:[(0,a.jsx)(u.aR,{children:(0,a.jsx)(u.ZB,{children:"Text with Blanks"})}),(0,a.jsx)(u.Wu,{children:(0,a.jsx)("div",{className:"prose max-w-none",children:null===(r=N.textWithBlanks)||void 0===r?void 0:r.map((e,t)=>(0,a.jsx)("span",{children:"text"===e.type?e.content:(0,a.jsx)("span",{className:"inline-block mx-1 px-2 py-1 border-2 rounded min-w-[100px] min-h-[30px] ".concat(H["blank-".concat(e.blankIndex)]?"border-blue-400 bg-blue-50":"border-dashed border-gray-400"),onDragOver:Z,onDrop:t=>q(t,"blank-".concat(e.blankIndex)),children:H["blank-".concat(e.blankIndex)]?(0,a.jsxs)("span",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:H["blank-".concat(e.blankIndex)].word}),!_&&(0,a.jsx)("button",{onClick:()=>L("blank-".concat(e.blankIndex)),className:"text-red-500 text-xs ml-2",children:"âœ•"}),_&&(0,a.jsx)("span",{className:"ml-1",children:H["blank-".concat(e.blankIndex)].word===N.blanks[e.blankIndex].correctWord?(0,a.jsx)(h.A,{className:"inline h-4 w-4 text-green-500"}):(0,a.jsx)(p.A,{className:"inline h-4 w-4 text-red-500"})})]}):(0,a.jsx)("span",{className:"text-gray-400",children:"___________"})})},t))})})]}),(0,a.jsxs)(u.Zp,{children:[(0,a.jsx)(u.aR,{children:(0,a.jsx)(u.ZB,{children:"Word Bank"})}),(0,a.jsx)(u.Wu,{children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(l=N.wordBank)||void 0===l?void 0:l.map((e,t)=>{let r=Object.values(H).some(e=>e&&e.index===t);return(0,a.jsx)("div",{draggable:!r&&!_,onDragStart:r=>O(r,e,t),className:"px-3 py-1 border rounded-md ".concat(r?"opacity-50 bg-gray-100":"bg-white cursor-grab"," ").concat(_?"cursor-default":""),children:e},t)})})})]})]}),(0,a.jsx)("div",{className:"mt-8 flex justify-end",children:_?(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-md",children:[(0,a.jsx)("span",{className:"font-medium",children:"Your Score:"}),(0,a.jsxs)("span",{className:"text-lg font-bold",children:[B,"%"]})]}),(0,a.jsx)(c(),{href:"/dashboard/grammar",children:(0,a.jsx)(d.$,{variant:"outline",children:"Back to Exercises"})})]}):(0,a.jsx)(d.$,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:U,children:"Submit Answers"})})]})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(i.A,{}),(0,a.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Exercise not found"}),(0,a.jsx)("p",{className:"mb-6",children:"The requested exercise could not be found."}),(0,a.jsx)(c(),{href:"/dashboard/grammar",children:(0,a.jsx)(d.$,{children:"Back to Grammar Exercises"})})]})})]})}},4245:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});var a=r(2149),n=r(301),s=r(4426),l=r(640),c=r(8081);function i(e){let t=e+"CollectionProvider",[r,i]=(0,n.A)(t),[o,d]=r(t,{collectionRef:{current:null},itemMap:new Map}),u=e=>{let{scope:t,children:r}=e,n=a.useRef(null),s=a.useRef(new Map).current;return(0,c.jsx)(o,{scope:t,itemMap:s,collectionRef:n,children:r})};u.displayName=t;let m=e+"CollectionSlot",x=a.forwardRef((e,t)=>{let{scope:r,children:a}=e,n=d(m,r),i=(0,s.s)(t,n.collectionRef);return(0,c.jsx)(l.DX,{ref:i,children:a})});x.displayName=m;let h=e+"CollectionItemSlot",p="data-radix-collection-item",f=a.forwardRef((e,t)=>{let{scope:r,children:n,...i}=e,o=a.useRef(null),u=(0,s.s)(t,o),m=d(h,r);return a.useEffect(()=>(m.itemMap.set(o,{ref:o,...i}),()=>void m.itemMap.delete(o))),(0,c.jsx)(l.DX,{[p]:"",ref:u,children:n})});return f.displayName=h,[{Provider:u,Slot:x,ItemSlot:f},function(t){let r=d(e+"CollectionConsumer",t);return a.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll("[".concat(p,"]")));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},i]}},4535:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},4593:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});var a=r(2149);function n(e){let t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>(...e)=>t.current?.(...e),[])}},4614:(e,t,r)=>{Promise.resolve().then(r.bind(r,4082))},5008:(e,t,r)=>{"use strict";r.d(t,{i:()=>s});var a=r(2149),n=r(4593);function s({prop:e,defaultProp:t,onChange:r=()=>{}}){let[s,l]=function({defaultProp:e,onChange:t}){let r=a.useState(e),[s]=r,l=a.useRef(s),c=(0,n.c)(t);return a.useEffect(()=>{l.current!==s&&(c(s),l.current=s)},[s,l,c]),r}({defaultProp:t,onChange:r}),c=void 0!==e,i=c?e:s,o=(0,n.c)(r);return[i,a.useCallback(t=>{if(c){let r="function"==typeof t?t(e):t;r!==e&&o(r)}else l(t)},[c,e,l,o])]}},5781:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(8081);function n(e){let{fullScreen:t=!0}=e;return(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center ".concat(t?"h-screen":"h-64"),children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-emerald-500"}),(0,a.jsx)("p",{className:"mt-4 text-emerald-700 font-medium",children:"Loading..."})]})}},6535:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(2149),n=r(9684);function s(){return(0,a.useEffect)(()=>{(0,n.lK)(),(0,n.Yq)()},[]),null}},6546:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6893:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]])},6915:(e,t,r)=>{"use strict";r.d(t,{B:()=>i});var a,n=r(2149),s=r(3077),l=(a||(a=r.t(n,2)))["useId".toString()]||(()=>void 0),c=0;function i(e){let[t,r]=n.useState(l());return(0,s.N)(()=>{e||r(e=>e??String(c++))},[e]),e||(t?`radix-${t}`:"")}},7188:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8822:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},9076:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9402:(e,t,r)=>{"use strict";r.d(t,{hO:()=>i,sG:()=>c});var a=r(2149),n=r(4632),s=r(640),l=r(8081),c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=a.forwardRef((e,r)=>{let{asChild:a,...n}=e,c=a?s.DX:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(c,{...n,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function i(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}},9684:(e,t,r)=>{"use strict";let a,n;r.d(t,{WV:()=>m,YP:()=>h,Yq:()=>p,lK:()=>x});var s=r(3124),l=r(6558),c=r(7033),i=r(1775);try{a=(0,s.Wp)({apiKey:"AIzaSyCVgDozEtEnz1BWZJfS-0-KkRWntCiNt8Y",authDomain:"telcmate.firebaseapp.com",projectId:"telcmate",storageBucket:"telcmate.firebasestorage.app",messagingSenderId:"945468433513",appId:"1:945468433513:web:88cc94b0976589a63f6ef8",measurementId:"G-ZRG66F2W9R"}),n=(0,l.aU)(a),(0,c.xI)(a),(0,i.TT)().then(e=>e&&(0,i.P5)(a))}catch(e){console.error("Error initializing Firebase:",e)}let o=(0,l.rJ)(n,"exercises"),d=(0,l.rJ)(n,"users"),u=(0,l.rJ)(n,"settings");async function m(e){return{id:(await (0,l.gS)(o,e)).id,...e}}async function x(){if((await (0,l.GG)(d)).empty)for(let e of[{name:"Admin User",code:"admin123",isAdmin:!0,isModerator:!1,isDemo:!1,role:"Admin"},{name:"Moderator User",code:"mod123",isAdmin:!1,isModerator:!0,isDemo:!1,role:"Moderator"},{name:"Test User",code:"user123",isAdmin:!1,isModerator:!1,isDemo:!1,role:"Student"},{name:"Demo User",code:"demo123",isAdmin:!1,isModerator:!1,isDemo:!0,role:"Student"}])await (0,l.gS)(d,e)}async function h(e){let t=(0,l.P)(d,(0,l._M)("code","==",e)),r=await (0,l.GG)(t);if(!r.empty){let e=r.docs[0];return{id:e.id,...e.data()}}return null}async function p(){(await (0,l.GG)(u)).empty&&await (0,l.BN)((0,l.H9)(u,"system"),{siteTitle:"Telc Mate",allowRegistration:!1,maintenanceMode:!1,defaultTimeLimit:{reading:20,listening:15,grammar:15,writing:30},language:"en",showCorrectAnswers:!0,allowTestRetake:!0,demoAccessLevel:"limited"})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2703,3136,6505,7950,6872,7043,842,6017,5515,497,954,7358],()=>t(4614)),_N_E=e.O()}]);