(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6273],{186:(e,s,t)=>{"use strict";t.d(s,{Fc:()=>c,TN:()=>o,XL:()=>d});var r=t(8081),a=t(2149),i=t(3484),l=t(7687);let n=(0,i.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=a.forwardRef((e,s)=>{let{className:t,variant:a,...i}=e;return(0,r.jsx)("div",{ref:s,role:"alert",className:(0,l.cn)(n({variant:a}),t),...i})});c.displayName="Alert";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h5",{ref:s,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",t),...a})});d.displayName="AlertTitle";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",t),...a})});o.displayName="AlertDescription"},1526:(e,s,t)=>{"use strict";t.d(s,{E:()=>c,o:()=>n});var r=t(8081),a=t(2149),i=t(6017);let l=(0,a.createContext)(void 0);function n(e){let{children:s}=e,[t,n]=(0,a.useState)([{type:"reading",title:"Reading",parts:[{part:"part1",title:"Teil 1: Title Matching",selectedExerciseId:null,exercises:[]},{part:"part2",title:"Teil 2: Multiple Choice",selectedExerciseId:null,exercises:[]},{part:"part3",title:"Teil 3: Gap Filling",selectedExerciseId:null,exercises:[]}]},{type:"listening",title:"Listening",parts:[{part:"part1",title:"Teil 1: Short Conversations",selectedExerciseId:null,exercises:[]},{part:"part2",title:"Teil 2: Dialogue",selectedExerciseId:null,exercises:[]},{part:"part3",title:"Teil 3: News & Announcements",selectedExerciseId:null,exercises:[]}]},{type:"grammar",title:"Grammar",parts:[{part:"part1",title:"Teil 1: Fill in the Blanks",selectedExerciseId:null,exercises:[]},{part:"part2",title:"Teil 2: Word Formation",selectedExerciseId:null,exercises:[]}]},{type:"writing",title:"Writing",parts:[{part:"part1",title:"Teil 1: Writing Task",selectedExerciseId:null,exercises:[]}]}]),[c,d]=(0,a.useState)(0),[o,m]=(0,a.useState)(0),[x,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[f,j]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=[...t];e.forEach((s,t)=>{s.parts.forEach((r,a)=>{let l="writing"===s.type?(0,i.DJ)(s.type,"part1").concat((0,i.DJ)(s.type,"part2")):(0,i.DJ)(s.type,r.part);e[t].parts[a].exercises=l.map(e=>({id:e.id,type:e.type,part:e.part,title:e.title}))})}),n(e)},[]),(0,a.useEffect)(()=>{let e=localStorage.getItem("currentTest");if(e)try{let{sections:s,currentSection:t,currentPart:r,isTestReady:a,writingChoice:i,showAnswers:l}=JSON.parse(e);n(s),d(t),m(r),u(a),void 0!==i&&p(i),void 0!==l&&j(l)}catch(e){console.error("Error loading saved test:",e),localStorage.removeItem("currentTest")}},[]),(0,r.jsx)(l.Provider,{value:{sections:t,currentSection:c,currentPart:o,setCurrentSection:d,setCurrentPart:m,selectExercise:(e,s,r)=>{let a=[...t];a[e].parts[s].selectedExerciseId=r,n(a)},getSelectedExercise:(e,s)=>{let r=t[e];if(!r)return null;let a=r.parts[s];if(!a)return null;let i=a.selectedExerciseId;if(!i)return null;let l=a.exercises.find(e=>e.id===i);return l||{id:i,type:r.type,part:a.part,title:"Exercise"}},isTestReady:x,startTest:()=>{u(!0),j(!1),localStorage.setItem("currentTest",JSON.stringify({sections:t,currentSection:c,currentPart:o,isTestReady:!0,writingChoice:h,showAnswers:f}))},completeTest:()=>{j(!0),localStorage.setItem("currentTest",JSON.stringify({sections:t,currentSection:c,currentPart:o,isTestReady:x,writingChoice:h,showAnswers:!0}))},resetTest:()=>{let e=[...t];e.forEach((s,t)=>{s.parts.forEach((s,r)=>{e[t].parts[r].selectedExerciseId=null})}),n(e),d(0),m(0),u(!1),p(null),j(!1),localStorage.removeItem("currentTest")},selectRandomExercises:()=>{let e=[...t],s=!0;return e.forEach((t,r)=>{t.parts.forEach((a,i)=>{let{exercises:l}=a;if(l.length>0){let s=Math.floor(Math.random()*l.length);e[r].parts[i].selectedExerciseId=l[s].id}else s=!1,console.warn("No exercises available for ".concat(t.type," ").concat(a.part))})}),n(e),s},writingChoice:h,setWritingChoice:p,showAnswers:f,setShowAnswers:j},children:s})}function c(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useTest must be used within a TestProvider");return e}},3214:(e,s,t)=>{Promise.resolve().then(t.bind(t,5352))},4317:(e,s,t)=>{"use strict";t.d(s,{k:()=>n});var r=t(8081),a=t(2149),i=t(7706),l=t(7687);let n=a.forwardRef((e,s)=>{let{className:t,value:a,...n}=e;return(0,r.jsx)(i.bL,{ref:s,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:(0,r.jsx)(i.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});n.displayName=i.bL.displayName},4604:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>d,av:()=>o,j7:()=>c,tU:()=>n});var r=t(8081),a=t(2149),i=t(8493),l=t(7687);let n=i.bL,c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.B8,{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})});c.displayName=i.B8.displayName;let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.l9,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})});d.displayName=i.l9.displayName;let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.UC,{ref:s,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});o.displayName=i.UC.displayName},4666:(e,s,t)=>{"use strict";t.d(s,{T:()=>l});var r=t(8081),a=t(2149),i=t(7687);let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...a})});l.displayName="Textarea"},5352:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>M});var r=t(8081),a=t(2149),i=t(9651),l=t(7950),n=t.n(l),c=t(3621),d=t(6810),o=t(5160),m=t(4604),x=t(4317),u=t(1411),h=t(6893),p=t(7543),f=t(8286),j=t(9921),g=t(9076),b=t(1251),N=t(8822),v=t(9708),w=t(1526),y=t(6017),k=t(186),C=t(8091),T=t(7890),S=t(5904);function A(e){let{exercise:s}=e,[t,i]=(0,a.useState)([]),[l,n]=(0,a.useState)(!1),c=()=>{n(!0)};return"part1"===s.part?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Texts"}),(0,r.jsx)("div",{className:"space-y-4",children:s.texts.map((e,s)=>(0,r.jsx)(d.Zp,{children:(0,r.jsxs)(d.Wu,{className:"p-4",children:[(0,r.jsxs)("p",{className:"font-medium mb-2",children:["Text ",s+1]}),(0,r.jsx)("p",{children:e.content})]})},s))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Titles"}),(0,r.jsx)("div",{className:"space-y-4",children:s.texts.map((e,t)=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(T.Label,{children:["Text ",t+1]}),(0,r.jsxs)(S.l6,{children:[(0,r.jsx)(S.bq,{children:(0,r.jsx)(S.yv,{placeholder:"Select a title"})}),(0,r.jsx)(S.gC,{children:s.titles.map((e,s)=>(0,r.jsx)(S.eb,{value:e,children:e},s))})]})]},t))})]})]}),(0,r.jsx)(o.$,{onClick:c,className:"w-full",children:"Check Answers"})]}):"part2"===s.part?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-gray-50 p-4 rounded-md mb-6",children:(0,r.jsx)("p",{className:"whitespace-pre-line",children:s.content})}),(0,r.jsx)("div",{className:"space-y-6",children:s.questions.map((e,t)=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("h3",{className:"font-medium",children:["Question ",t+1,": ",e]}),(0,r.jsx)(C.z,{children:s.options[t].map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(C.C,{value:s.toString(),id:"q".concat(t,"-o").concat(s)}),(0,r.jsx)(T.Label,{htmlFor:"q".concat(t,"-o").concat(s),children:e})]},s))})]},t))}),(0,r.jsx)(o.$,{onClick:c,className:"w-full",children:"Check Answers"})]}):"part3"===s.part?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"space-y-4",children:s.content.map((e,t)=>{if("string"==typeof e)return(0,r.jsx)("p",{children:e},t);if(e.startsWith("___")){let a=Number.parseInt(e.replace("___",""))-1;return(0,r.jsx)("div",{className:"my-2",children:(0,r.jsxs)(S.l6,{children:[(0,r.jsx)(S.bq,{children:(0,r.jsx)(S.yv,{placeholder:"Gap ".concat(a+1)})}),(0,r.jsx)(S.gC,{children:s.sentences.map((e,s)=>(0,r.jsx)(S.eb,{value:s.toString(),children:e},s))})]})},t)}return null})}),(0,r.jsx)(o.$,{onClick:c,className:"w-full",children:"Check Answers"})]}):(0,r.jsx)("div",{children:"Unsupported reading exercise type"})}var E=t(2739),I=t(6360),L=t(1528);function R(e){let{exercise:s}=e,[t,i]=(0,a.useState)([]),[l,n]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsx)(d.Zp,{className:"w-full max-w-md",children:(0,r.jsxs)(d.Wu,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(E.A,{className:"h-5 w-5 text-emerald-500"}),(0,r.jsx)("span",{className:"font-medium",children:"Audio"})]}),(0,r.jsx)(o.$,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:()=>{m(!c)},children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.A,{className:"h-4 w-4"}),"Pause"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.A,{className:"h-4 w-4"}),"Play"]})})]}),(0,r.jsx)("audio",{className:"w-full mt-4",controls:!0,src:s.audioUrl,children:"Your browser does not support the audio element."})]})})}),(0,r.jsx)("div",{className:"space-y-6",children:s.questions.map((e,t)=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("h3",{className:"font-medium",children:["Question ",t+1,": ",e]}),(0,r.jsx)(C.z,{children:s.options[t].map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(C.C,{value:s.toString(),id:"q".concat(t,"-o").concat(s)}),(0,r.jsx)(T.Label,{htmlFor:"q".concat(t,"-o").concat(s),children:e})]},s))})]},t))}),(0,r.jsx)(o.$,{onClick:()=>{n(!0)},className:"w-full",children:"Check Answers"})]})}var B=t(2631),F=t(1450),W=t(5910),q=t(9679);function P(e){let{id:s,word:t}=e,{attributes:a,listeners:i,setNodeRef:l,transform:n,transition:c}=(0,F.gl)({id:s}),d={transform:W.Ks.Transform.toString(n),transition:c};return(0,r.jsx)("div",{ref:l,style:d,...a,...i,className:"bg-white border border-gray-300 rounded-md p-2 mb-2 cursor-move shadow-sm hover:shadow-md transition-shadow",children:t})}function $(e){let{id:s,children:t,className:a}=e;return(0,r.jsx)("div",{id:s,className:"p-3 rounded-md ".concat(a),children:t})}function _(e){let{exercise:s,showAnswers:t}=e,[i,l]=(0,a.useState)({}),[n,c]=(0,a.useState)([]),[d,o]=(0,a.useState)([]),m=(0,B.FR)((0,B.MS)(B.AN),(0,B.MS)(B.uN,{coordinateGetter:F.JR}));return((0,a.useEffect)(()=>{"part2"===s.part&&(c(s.wordBank.map((e,s)=>({id:"word-".concat(s),word:e}))),o([]))},[s]),"part1"===s.part)?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"space-y-4",children:s.textWithBlanks.map((e,a)=>{if("text"===e.type)return(0,r.jsx)("span",{children:e.content},a);if("blank"===e.type){let n=e.blankIndex,c=s.blanks[n].correctAnswer,d=i[n]===c;return(0,r.jsxs)(S.l6,{value:i[n]||"",onValueChange:e=>l({...i,[n]:e}),disabled:t,children:[(0,r.jsx)(S.bq,{className:"w-40 inline-block mx-1 ".concat(t?d?"border-green-500 bg-green-50":"border-red-500 bg-red-50":""),children:(0,r.jsx)(S.yv,{placeholder:"Blank ".concat(n+1)})}),(0,r.jsx)(S.gC,{children:s.blanks[n].options.map((e,s)=>(0,r.jsx)(S.eb,{value:e,children:e},s))})]},a)}return null})}),t&&(0,r.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[(0,r.jsx)("h3",{className:"font-medium mb-2 text-blue-800",children:"Correct Answers:"}),(0,r.jsx)("ul",{className:"list-disc list-inside space-y-1",children:s.blanks.map((e,s)=>(0,r.jsxs)("li",{className:"text-blue-700",children:["Blank ",s+1,": ",(0,r.jsx)("span",{className:"font-medium",children:e.correctAnswer})]},s))})]})]}):"part2"===s.part?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("p",{className:"mb-4",children:s.instructions||"Drag the words from the word bank to form the correct sentences."}),(0,r.jsx)("div",{className:"text-content mb-6",children:s.textWithBlanks.map((e,a)=>{if("text"===e.type)return(0,r.jsx)("span",{children:e.content},a);if("blank"===e.type){var i;let l=e.blankIndex,n=s.blanks?null===(i=s.blanks[l])||void 0===i?void 0:i.correctAnswer:null;return(0,r.jsx)("span",{className:"inline-block mx-1 px-3 py-1 border border-dashed rounded-md min-w-[100px] ".concat(t?"bg-green-50 border-green-500":"bg-gray-50 border-gray-300"),children:t?n:d[l]?d[l].word:"[Blank ".concat(l+1,"]")},a)}return null})}),(0,r.jsx)(B.Mp,{sensors:m,collisionDetection:B.fp,onDragEnd:e=>{let{active:s,over:t}=e;if(t&&s.id!==t.id){if(s.id.toString().startsWith("word-")&&"drop-area"===t.id){let e=n.find(e=>e.id===s.id);e&&(c(n.filter(e=>e.id!==s.id)),o([...d,e]))}else if(s.id.toString().startsWith("word-")&&t.id.toString().startsWith("word-")){let e=n.findIndex(e=>e.id===s.id),r=n.findIndex(e=>e.id===t.id);c((0,F.be)(n,e,r))}else if("word-bank"===t.id){let e=d.find(e=>e.id===s.id);e&&(o(d.filter(e=>e.id!==s.id)),c([...n,e]))}}},modifiers:[q.FN],children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:"Word Bank"}),(0,r.jsx)($,{id:"word-bank",className:"bg-gray-50 min-h-[200px]",children:(0,r.jsx)(F.gB,{items:n.map(e=>e.id),strategy:F._G,children:n.map(e=>(0,r.jsx)(P,{id:e.id,word:e.word},e.id))})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:"Your Answer"}),(0,r.jsx)($,{id:"drop-area",className:"bg-blue-50 min-h-[200px]",children:(0,r.jsx)(F.gB,{items:d.map(e=>e.id),strategy:F._G,children:d.map(e=>(0,r.jsx)(P,{id:e.id,word:e.word},e.id))})})]})]})})]}),t&&(0,r.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[(0,r.jsx)("h3",{className:"font-medium mb-2 text-blue-800",children:"Correct Answers:"}),(0,r.jsx)("ul",{className:"list-disc list-inside space-y-1",children:s.blanks&&s.blanks.map((e,s)=>(0,r.jsxs)("li",{className:"text-blue-700",children:["Blank ",s+1,": ",(0,r.jsx)("span",{className:"font-medium",children:e.correctAnswer})]},s))})]})]}):(0,r.jsx)("div",{children:"Unsupported grammar exercise type"})}var Y=t(4666),D=t(5844),Z=t(7188),G=t(6539);function J(e){let{exercise:s,showAnswers:t}=e,{writingChoice:i,setWritingChoice:l}=(0,w.E)(),{toast:n}=(0,D.dj)(),[c,m]=(0,a.useState)(""),[x,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(0),f=[{id:1,title:"Formal Complaint",prompt:"Write a formal letter of complaint (approximately 150-200 words) to a hotel manager regarding issues you experienced during your stay. Describe the problems, explain how they affected your stay, and request specific compensation.",evaluationCriteria:["Clear description of the problems","Appropriate formal language and tone","Logical organization of ideas","Correct grammar and vocabulary","Appropriate length (150-200 words)"]},{id:2,title:"Information Request",prompt:"Write a formal email (approximately 150-200 words) to a language school requesting information about their intensive German courses. Ask about course duration, prices, accommodation options, and any additional services they offer.",evaluationCriteria:["Clear and specific questions","Appropriate formal language and tone","Logical organization of ideas","Correct grammar and vocabulary","Appropriate length (150-200 words)"]}];(0,a.useEffect)(()=>{if(i){let e=localStorage.getItem("writing-answer-".concat(s.id,"-").concat(i));e&&(m(e),p(""===e.trim()?0:e.trim().split(/\s+/).length),u(!0))}},[s.id,i]);let j=e=>{l(e),n({title:"Option Selected",description:"You have selected a writing task. You can now begin writing your response."})};if(null===i)return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Choose One Writing Task"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Select one of the following writing tasks to complete."})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:f.map(e=>(0,r.jsxs)(d.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:e.title})}),(0,r.jsxs)(d.Wu,{children:[(0,r.jsx)("p",{className:"text-sm text-gray-700 mb-4",children:e.prompt}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,r.jsx)("p",{className:"font-medium mb-1",children:"Evaluation Criteria:"}),(0,r.jsx)("ul",{className:"list-disc list-inside",children:e.evaluationCriteria.map((e,s)=>(0,r.jsx)("li",{children:e},s))})]})]}),(0,r.jsx)(d.wL,{children:(0,r.jsx)(o.$,{onClick:()=>j(e.id),className:"w-full bg-emerald-600 hover:bg-emerald-700",disabled:t,children:"Select This Task"})})]},e.id))})]});let b=f.find(e=>e.id===i);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Your Writing Task"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(Z.A,{className:"h-4 w-4 text-gray-500"}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["Time Limit: ",s.timeLimit||30," minutes"]})]})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:b.title}),(0,r.jsx)(d.BT,{children:b.prompt})]}),(0,r.jsxs)(d.Wu,{children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium mb-2",children:"Evaluation Criteria:"}),(0,r.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-600",children:b.evaluationCriteria.map((e,s)=>(0,r.jsx)("li",{children:e},s))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("label",{htmlFor:"answer",className:"font-medium",children:"Your Answer:"}),(0,r.jsxs)("span",{className:"text-sm ".concat(h<150||h>200?"text-amber-500":"text-green-600"),children:[h," ",1===h?"word":"words"," (recommended: 150-200 words)"]})]}),(0,r.jsx)(Y.T,{id:"answer",value:c,onChange:e=>{let s=e.target.value;m(s),p(""===s.trim()?0:s.trim().split(/\s+/).length),u(!1)},placeholder:"Write your answer here...",className:"min-h-[300px]",disabled:t})]})]}),(0,r.jsxs)(d.wL,{className:"flex justify-between",children:[!t&&(0,r.jsx)(o.$,{variant:"outline",onClick:()=>l(null),disabled:t,children:"Choose Different Task"}),!t&&(0,r.jsx)(o.$,{onClick:()=>{if(c.trim().length<10){n({title:"Answer Too Short",description:"Please write a more detailed answer before saving.",variant:"destructive"});return}localStorage.setItem("writing-answer-".concat(s.id,"-").concat(i),c),u(!0),n({title:"Answer Saved",description:"Your answer has been saved successfully."})},className:"flex items-center gap-2",disabled:c.trim().length<10,children:x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),"Saved"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(G.A,{className:"h-4 w-4"}),"Save Answer"]})})]})]}),t&&(0,r.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md",children:[(0,r.jsx)("h3",{className:"font-medium mb-2 text-blue-800",children:"Writing Evaluation:"}),(0,r.jsx)("p",{className:"mb-2",children:"Your writing will be evaluated based on the following criteria:"}),(0,r.jsx)("ul",{className:"list-disc list-inside space-y-1",children:b.evaluationCriteria.map((e,s)=>(0,r.jsx)("li",{className:"text-blue-700",children:e},s))})]})]})}function M(){let e=(0,i.useRouter)(),{toast:s}=(0,D.dj)(),{sections:t,currentSection:l,currentPart:C,setCurrentSection:T,setCurrentPart:S,getSelectedExercise:E,isTestReady:I,completeTest:L,showAnswers:B,setShowAnswers:F}=(0,w.E)(),[W,q]=(0,a.useState)(null),[P,$]=(0,a.useState)(!0),[Y,Z]=(0,a.useState)(null),[G,M]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!I){e.push("/dashboard/test");return}$(!0),Z(null);try{let e=E(l,C);if(!e){Z("No exercise selected for this part. Please go back and generate a new test."),$(!1);return}let s=(0,y.dg)(e.id);if(!s){Z("Exercise not found: ".concat(e.id,". Please go back and generate a new test.")),$(!1);return}q(s),$(!1)}catch(e){console.error("Error loading exercise:",e),Z("Error loading exercise. Please go back and generate a new test."),$(!1),s({variant:"destructive",title:"Error Loading Exercise",description:"There was a problem loading the exercise. Please try generating a new test."})}},[l,C,I,e,E,s]);let O=()=>{e.push("/dashboard")},U=e=>{switch(e){case"reading":default:return(0,r.jsx)(u.A,{className:"h-5 w-5"});case"listening":return(0,r.jsx)(h.A,{className:"h-5 w-5"});case"grammar":return(0,r.jsx)(p.A,{className:"h-5 w-5"});case"writing":return(0,r.jsx)(f.A,{className:"h-5 w-5"})}},z=t.reduce((e,s)=>e+s.parts.length,0),X=t.slice(0,l).reduce((e,s)=>e+s.parts.length,0)+C+1;return P?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(c.A,{}),(0,r.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)("div",{className:"text-center",children:"Loading exercise..."})})]}):Y?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(c.A,{}),(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)(k.Fc,{variant:"destructive",className:"mb-6",children:[(0,r.jsx)(j.A,{className:"h-4 w-4"}),(0,r.jsx)(k.XL,{children:"Error"}),(0,r.jsx)(k.TN,{children:Y})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)(n(),{href:"/dashboard/test",children:(0,r.jsx)(o.$,{variant:"outline",children:"Back to Test Selection"})}),(0,r.jsx)(o.$,{variant:"outline",onClick:O,children:"Exit Test"})]})]})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(c.A,{}),(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"TELC B2 Test"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["Part ",X," of ",z]}),(0,r.jsx)(x.k,{value:X/z*100,className:"w-32 h-2"})]})]}),B&&(0,r.jsxs)(k.Fc,{className:"mb-4",children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),(0,r.jsx)(k.XL,{children:"Test Completed"}),(0,r.jsx)(k.TN,{children:"You have completed the test. You can now review your answers and see the correct solutions."})]}),(0,r.jsx)(m.tU,{value:"".concat(l,"-").concat(C),onValueChange:e=>{let[s,t]=e.split("-").map(Number);T(s),S(t)},className:"mb-6",children:(0,r.jsx)(m.j7,{className:"mb-2 flex flex-wrap",children:t.map((e,s)=>(0,r.jsxs)("div",{className:"flex flex-col mb-2 mr-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[U(e.type),(0,r.jsx)("span",{className:"text-sm font-medium",children:e.title})]}),(0,r.jsx)("div",{className:"flex",children:e.parts.map((e,t)=>(0,r.jsxs)(m.Xi,{value:"".concat(s,"-").concat(t),className:"text-xs px-2 py-1",children:["Teil ",t+1]},"".concat(s,"-").concat(t)))})]},s))})})]}),(0,r.jsxs)(d.Zp,{className:"mb-6",children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:W.title}),(0,r.jsx)(d.BT,{children:W.description})]}),(0,r.jsxs)(d.Wu,{children:["reading"===W.type&&(0,r.jsx)(A,{exercise:W,showAnswers:B}),"listening"===W.type&&(0,r.jsx)(R,{exercise:W,showAnswers:B}),"grammar"===W.type&&(0,r.jsx)(_,{exercise:W,showAnswers:B}),"writing"===W.type&&(0,r.jsx)(J,{exercise:W,showAnswers:B})]}),(0,r.jsxs)(d.wL,{className:"flex justify-between",children:[(0,r.jsxs)(o.$,{variant:"outline",onClick:()=>{C>0?S(C-1):l>0&&(T(l-1),S(t[l-1].parts.length-1))},disabled:0===l&&0===C,className:"flex items-center gap-2",children:[(0,r.jsx)(b.A,{className:"h-4 w-4"}),"Previous Part"]}),l===t.length-1&&C===t[l].parts.length-1?(0,r.jsx)(o.$,{onClick:()=>{G?e.push("/dashboard"):(M(!0),L(),s({title:"Test Completed",description:"Your test has been completed. You can now review your answers."}))},className:"".concat(G?"bg-blue-600 hover:bg-blue-700":"bg-emerald-600 hover:bg-emerald-700"," flex items-center gap-2"),children:G?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.A,{className:"h-4 w-4"}),"Return to Dashboard"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),"Finish Test"]})}):(0,r.jsxs)(o.$,{onClick:()=>{C<t[l].parts.length-1?S(C+1):l<t.length-1&&(T(l+1),S(0))},className:"bg-emerald-600 hover:bg-emerald-700 flex items-center gap-2",children:["Next Part",(0,r.jsx)(v.A,{className:"h-4 w-4"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)(n(),{href:"/dashboard/test",children:(0,r.jsx)(o.$,{variant:"outline",children:"Back to Test Selection"})}),(0,r.jsx)(o.$,{variant:"outline",onClick:O,children:"Exit Test"})]})]})]})}},7890:(e,s,t)=>{"use strict";t.d(s,{Label:()=>d});var r=t(8081),a=t(2149),i=t(7447),l=t(3484),n=t(7687);let c=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.b,{ref:s,className:(0,n.cn)(c(),t),...a})});d.displayName=i.b.displayName},8091:(e,s,t)=>{"use strict";t.d(s,{C:()=>d,z:()=>c});var r=t(8081),a=t(2149),i=t(5562),l=t(8022),n=t(7687);let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.bL,{className:(0,n.cn)("grid gap-2",t),...a,ref:s})});c.displayName=i.bL.displayName;let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.q7,{ref:s,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,r.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(l.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=i.q7.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[6505,7950,6872,2153,842,6106,6017,5515,497,954,7358],()=>s(3214)),_N_E=e.O()}]);