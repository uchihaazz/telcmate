(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2235],{186:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>c,TN:()=>o,XL:()=>d});var a=s(8081),l=s(2149),i=s(3484),r=s(7687);let n=(0,i.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=l.forwardRef((e,t)=>{let{className:s,variant:l,...i}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,r.cn)(n({variant:l}),s),...i})});c.displayName="Alert";let d=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("h5",{ref:t,className:(0,r.cn)("mb-1 font-medium leading-none tracking-tight",s),...l})});d.displayName="AlertTitle";let o=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-sm [&_p]:leading-relaxed",s),...l})});o.displayName="AlertDescription"},900:(e,t,s)=>{"use strict";s.d(t,{p:()=>r});var a=s(8081),l=s(2149),i=s(7687);let r=l.forwardRef((e,t)=>{let{className:s,type:l,...r}=e;return(0,a.jsx)("input",{type:l,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});r.displayName="Input"},4666:(e,t,s)=>{"use strict";s.d(t,{T:()=>r});var a=s(8081),l=s(2149),i=s(7687);let r=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});r.displayName="Textarea"},5436:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T});var a=s(8081),l=s(2149),i=s(9651),r=s(7950),n=s.n(r),c=s(3621),d=s(6535),o=s(6810),m=s(5160),x=s(900),h=s(7890),u=s(4666),p=s(5904),j=s(7849),v=s(4690),g=s(3210),b=s(3047),f=s(2522),N=s(5844),y=s(6017),w=s(186),C=s(5781);function T(e){let{params:t}=e,s=(0,i.useRouter)(),{toast:r}=(0,N.dj)(),[T,k]=(0,l.useState)(!1),[A,L]=(0,l.useState)(!0),[S,E]=(0,l.useState)(null),[F,q]=(0,l.useState)(""),[R,B]=(0,l.useState)(""),[$,M]=(0,l.useState)(""),[W,z]=(0,l.useState)(""),[O,I]=(0,l.useState)(15),[U,P]=(0,l.useState)(""),[D,V]=(0,l.useState)([{content:"",correctTitle:""}]),[G,X]=(0,l.useState)([""]),[Q,_]=(0,l.useState)([""]),[Y,Z]=(0,l.useState)([[""]]),[J,K]=(0,l.useState)([0]),[H,ee]=(0,l.useState)([{content:""}]),[et,es]=(0,l.useState)([""]),[ea,el]=(0,l.useState)(["X"]),[ei,er]=(0,l.useState)(""),[en,ec]=(0,l.useState)(null),[ed,eo]=(0,l.useState)(""),[em,ex]=(0,l.useState)(""),[eh,eu]=(0,l.useState)([{type:"text",content:""}]),[ep,ej]=(0,l.useState)([{options:["","","",""]}]),[ev,eg]=(0,l.useState)(["","","","","","","","","",""]),[eb,ef]=(0,l.useState)([""]),[eN,ey]=(0,l.useState)([""]),[ew,eC]=(0,l.useState)([""]),[eT,ek]=(0,l.useState)([""]),[eA,eL]=(0,l.useState)(""),[eS,eE]=(0,l.useState)(["Task completion","Organization and coherence","Range of vocabulary","Grammatical accuracy","Register and format"]);(0,l.useEffect)(()=>{let e="true"===localStorage.getItem("isAdmin");if(!e){s.push("/dashboard");return}k(e);let a=(0,y.dg)(t.id);if(!a){r({title:"Exercise not found",description:"The requested exercise could not be found.",variant:"destructive"}),s.push("/admin");return}E(a),q(a.type),B(a.part),M(a.title),z(a.description),I(a.timeLimit),"reading"===a.type?"part1"===a.part?(V(a.texts||[{content:"",correctTitle:""}]),X(a.titles||[""])):"part2"===a.part?(P(a.content||""),_(a.questions||[""]),Z(a.options||[[""]]),K(a.correctAnswers||[0])):"part3"===a.part&&(ee(a.texts||[{content:""}]),es(a.titles||[""]),el(a.correctMatches||["X"])):"listening"===a.type?(er(a.audioUrl||""),_(a.questions||[""]),Z(a.options||[[""]]),K(a.correctAnswers||[0]),"part2"===a.part&&eo(a.transcript||"")):"grammar"===a.type?"part1"===a.part?(eu(a.textWithBlanks||[{type:"text",content:""}]),ej(a.blanks||[{options:["","","",""]}]),K(a.correctAnswers||[0])):"part2"===a.part&&(eu(a.textWithBlanks||[{type:"text",content:""}]),ej(a.blanks||[{correctWord:""}].map(e=>({options:[e.correctWord||"","","",""]}))),eg(a.wordBank||["","","","","","","","","",""])):"writing"===a.type&&(eL(a.prompt||""),eE(a.evaluationCriteria||["Task completion","Organization and coherence","Range of vocabulary","Grammatical accuracy","Register and format"])),L(!1)},[t.id,s,r]);let eF=e=>{let t=[...D];t.splice(e,1),V(t)},eq=(e,t,s)=>{let a=[...D];a[e][t]=s,V(a)},eR=(e,t)=>{let s=[...G];s[e]=t,X(s)},eB=e=>{let t=[...G];t.splice(e,1),X(t)},e$=e=>{let t=[...H];t.splice(e,1),ee(t)},eM=(e,t)=>{let s=[...H];s[e].content=t,ee(s)},eW=(e,t)=>{let s=[...et];s[e]=t,es(s)},ez=(e,t)=>{let s=[...ea];s[e]=t,el(s)},eO=()=>{_([...Q,""]),Z([...Y,[""]]),K([...J,0])},eI=e=>{let t=[...Q];t.splice(e,1),_(t);let s=[...Y];s.splice(e,1),Z(s);let a=[...J];a.splice(e,1),K(a)},eU=(e,t)=>{let s=[...Q];s[e]=t,_(s)},eP=e=>{let t=[...Y];t[e]=[...t[e],""],Z(t)},eD=(e,t)=>{let s=[...Y];s[e].splice(t,1),Z(s)},eV=(e,t,s)=>{let a=[...Y];a[e][t]=s,Z(a)},eG=(e,t)=>{let s=[...J];s[e]=Number.parseInt(t),K(s)},eX=()=>{eu([...eh,{type:"blank",blankIndex:ep.length},{type:"text",content:""}]),ej([...ep,{options:["","","",""]}])},eQ=(e,t)=>{let s=[...eh];"text"===s[e].type&&(s[e].content=t),eu(s)},e_=(e,t,s)=>{let a=[...ep];a[e].options[t]=s,ej(a)},eY=(e,t)=>{let s=[...ev];s[e]=t,eg(s)},eZ=e=>{let t=[...eS];t.splice(e,1),eE(t)},eJ=(e,t)=>{let s=[...eS];s[e]=t,eE(s)};return A?(0,a.jsx)(C.A,{}):T?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(d.A,{}),(0,a.jsx)(c.A,{}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Edit Exercise"}),(0,a.jsx)(n(),{href:"/admin",children:(0,a.jsx)(m.$,{variant:"outline",children:"Back to Dashboard"})})]}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!$||!W||!F||!R||!O){r({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"});return}if("listening"===F&&!ei){ex("Please provide an audio file or URL"),r({title:"Validation Error",description:"Please provide an audio file for the listening exercise.",variant:"destructive"});return}let t={...S,type:F,part:R,title:$,description:W,timeLimit:Number.parseInt(O)};if("reading"===F){if("part1"===R){let e=G.filter(e=>""!==e.trim());t={...t,texts:D,titles:e}}else if("part2"===R)t={...t,content:U,questions:Q,options:Y,correctAnswers:J};else if("part3"===R){let e=et.filter(e=>""!==e.trim()),s=H.filter(e=>""!==e.content.trim()),a=ea.slice(0,e.length);t={...t,titles:e,texts:s,correctMatches:a}}}else"listening"===F?(t={...t,audioUrl:ei,questions:Q,options:Y,correctAnswers:J},"part2"===R&&(t.transcript=ed)):"grammar"===F?"part1"===R?t={...t,textWithBlanks:eh,blanks:ep,correctAnswers:J}:"part2"===R&&(t={...t,textWithBlanks:eh,blanks:ep.map((e,t)=>({correctWord:e.options[0]})),wordBank:ev}):"writing"===F&&(t={...t,prompt:eA,evaluationCriteria:eS});(0,y.O7)(t)?(r({title:"Exercise Updated",description:"The exercise has been updated successfully."}),s.push("/admin")):r({title:"Update Failed",description:"Failed to update the exercise. Please try again.",variant:"destructive"})},children:[(0,a.jsxs)(o.Zp,{className:"mb-6",children:[(0,a.jsx)(o.aR,{children:(0,a.jsx)(o.ZB,{children:"Basic Information"})}),(0,a.jsxs)(o.Wu,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"exerciseType",children:"Exercise Type"}),(0,a.jsxs)(p.l6,{value:F,onValueChange:q,required:!0,disabled:!0,children:[(0,a.jsx)(p.bq,{id:"exerciseType",children:(0,a.jsx)(p.yv,{placeholder:"Select exercise type"})}),(0,a.jsxs)(p.gC,{children:[(0,a.jsx)(p.eb,{value:"reading",children:"Reading"}),(0,a.jsx)(p.eb,{value:"listening",children:"Listening"}),(0,a.jsx)(p.eb,{value:"grammar",children:"Grammar"}),(0,a.jsx)(p.eb,{value:"writing",children:"Writing"})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Exercise type cannot be changed"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"exercisePart",children:"Exercise Part"}),(0,a.jsxs)(p.l6,{value:R,onValueChange:B,required:!0,disabled:!0,children:[(0,a.jsx)(p.bq,{id:"exercisePart",children:(0,a.jsx)(p.yv,{placeholder:"Select exercise part"})}),(0,a.jsxs)(p.gC,{children:[(0,a.jsx)(p.eb,{value:"part1",children:"Teil 1"}),(0,a.jsx)(p.eb,{value:"part2",children:"Teil 2"}),"grammar"!==F&&"writing"!==F&&(0,a.jsx)(p.eb,{value:"part3",children:"Teil 3"})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Exercise part cannot be changed"})]})]}),F&&R&&(0,a.jsxs)(w.Fc,{className:"mb-6",children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),(0,a.jsx)(w.XL,{children:"Exercise Type Information"}),(0,a.jsxs)(w.TN,{children:["reading"===F&&"part1"===R&&"Title Matching Exercise","reading"===F&&"part2"===R&&"Multiple Choice Questions","reading"===F&&"part3"===R&&"Title-Text Matching with X Option","listening"===F&&"part1"===R&&"Short Conversations","listening"===F&&"part2"===R&&"Dialogue","listening"===F&&"part3"===R&&"News and Announcements","grammar"===F&&"part1"===R&&"Fill in the Blanks","grammar"===F&&"part2"===R&&"Word Formation","writing"===F&&"part1"===R&&"Formal Letter/Email","writing"===F&&"part2"===R&&"Essay"]})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,a.jsx)(h.Label,{htmlFor:"title",children:"Title"}),(0,a.jsx)(x.p,{id:"title",value:$,onChange:e=>M(e.target.value),placeholder:"Enter exercise title",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,a.jsx)(h.Label,{htmlFor:"description",children:"Description"}),(0,a.jsx)(u.T,{id:"description",value:W,onChange:e=>z(e.target.value),placeholder:"Enter exercise description",className:"min-h-[100px]",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"timeLimit",children:"Time Limit (minutes)"}),(0,a.jsx)(x.p,{id:"timeLimit",type:"number",value:O,onChange:e=>I(e.target.value),min:"1",max:"120",required:!0})]})]})]}),F&&R&&(0,a.jsxs)(o.Zp,{className:"mb-6",children:[(0,a.jsx)(o.aR,{children:(0,a.jsx)(o.ZB,{children:"Exercise Content"})}),(0,a.jsxs)(o.Wu,{children:["reading"===F&&"part1"===R&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Title Matching Exercise"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(h.Label,{children:"Texts"}),D.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 border rounded-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("h4",{className:"font-medium",children:["Text ",t+1]}),(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"sm",onClick:()=>eF(t),disabled:D.length<=1,children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"text-content-".concat(t),children:"Content"}),(0,a.jsx)(u.T,{id:"text-content-".concat(t),value:e.content,onChange:e=>eq(t,"content",e.target.value),placeholder:"Enter text content",className:"min-h-[100px]"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"text-title-".concat(t),children:"Correct Title"}),(0,a.jsx)(x.p,{id:"text-title-".concat(t),value:e.correctTitle,onChange:e=>eq(t,"correctTitle",e.target.value),placeholder:"Enter correct title for this text"})]})]})]},t)),(0,a.jsxs)(m.$,{type:"button",variant:"outline",onClick:()=>{V([...D,{content:"",correctTitle:""}])},className:"w-full",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"})," Add Text"]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(h.Label,{children:"Titles (including distractors)"}),(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{X([...G,""])},children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})]}),G.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,a.jsxs)(h.Label,{htmlFor:"title-".concat(t),children:["Title ",t+1]}),(0,a.jsx)(x.p,{id:"title-".concat(t),value:e,onChange:e=>eR(t,e.target.value),placeholder:"Enter title ".concat(t+1)})]}),(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"sm",className:"mt-8",onClick:()=>eB(t),disabled:G.length<=D.length,children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})]},t)),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Note: You should have at least as many titles as texts, plus some distractors."})]})]}),"reading"===F&&"part2"===R&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Multiple Choice Exercise"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"reading-content",children:"Reading Text"}),(0,a.jsx)(u.T,{id:"reading-content",value:U,onChange:e=>P(e.target.value),placeholder:"Enter the reading text",className:"min-h-[200px]"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(h.Label,{children:"Questions"}),Q.map((e,t)=>{var s,l,i;return(0,a.jsxs)("div",{className:"p-4 border rounded-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("h4",{className:"font-medium",children:["Question ",t+1]}),(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"sm",onClick:()=>eI(t),disabled:Q.length<=1,children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"question-".concat(t),children:"Question Text"}),(0,a.jsx)(x.p,{id:"question-".concat(t),value:e,onChange:e=>eU(t,e.target.value),placeholder:"Enter question text"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(h.Label,{children:"Options"}),(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"sm",onClick:()=>eP(t),children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})]}),null===(s=Y[t])||void 0===s?void 0:s.map((e,s)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(x.p,{value:e,onChange:e=>eV(t,s,e.target.value),placeholder:"Option ".concat(s+1)}),(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"sm",onClick:()=>eD(t,s),disabled:Y[t].length<=1,children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})]},s))]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"correct-answer-".concat(t),children:"Correct Answer"}),(0,a.jsxs)(p.l6,{value:null===(l=J[t])||void 0===l?void 0:l.toString(),onValueChange:e=>eG(t,e),children:[(0,a.jsx)(p.bq,{id:"correct-answer-".concat(t),children:(0,a.jsx)(p.yv,{placeholder:"Select correct answer"})}),(0,a.jsx)(p.gC,{children:null===(i=Y[t])||void 0===i?void 0:i.map((e,t)=>(0,a.jsxs)(p.eb,{value:t.toString(),children:["Option ",t+1]},t))})]})]})]})]},t)}),(0,a.jsxs)(m.$,{type:"button",variant:"outline",onClick:eO,className:"w-full",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"})," Add Question"]})]})]}),"reading"===F&&"part3"===R&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Title-Text Matching with X Option"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"In this exercise, students need to match titles with texts. Some titles may not have a matching text (X option)."}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(h.Label,{children:"Titles"}),et.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 border rounded-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("h4",{className:"font-medium",children:["Title ",t+1]}),t>0&&(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=[...et];e.splice(t,1),es(e);let s=[...ea];s.splice(t,1),el(s)},children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"part3-title-".concat(t),children:"Title Text"}),(0,a.jsx)(x.p,{id:"part3-title-".concat(t),value:e,onChange:e=>eW(t,e.target.value),placeholder:"Enter title text"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"correct-match-".concat(t),children:"Correct Match"}),(0,a.jsxs)(p.l6,{value:ea[t],onValueChange:e=>ez(t,e),children:[(0,a.jsx)(p.bq,{id:"correct-match-".concat(t),children:(0,a.jsx)(p.yv,{placeholder:"Select correct match"})}),(0,a.jsxs)(p.gC,{children:[(0,a.jsx)(p.eb,{value:"X",children:"X (No matching text)"}),H.map((e,t)=>(0,a.jsxs)(p.eb,{value:"text-".concat(t),children:["Text ",t+1]},t))]})]})]})]})]},t)),(0,a.jsxs)(m.$,{type:"button",variant:"outline",onClick:()=>{es([...et,""]),el([...ea,"X"])},className:"w-full",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"})," Add Title"]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(h.Label,{children:"Texts"}),H.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 border rounded-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("h4",{className:"font-medium",children:["Text ",t+1]}),(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"sm",onClick:()=>e$(t),disabled:H.length<=1,children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"part3-text-content-".concat(t),children:"Content"}),(0,a.jsx)(u.T,{id:"part3-text-content-".concat(t),value:e.content,onChange:e=>eM(t,e.target.value),placeholder:"Enter text content",className:"min-h-[100px]"})]})]},t)),(0,a.jsxs)(m.$,{type:"button",variant:"outline",onClick:()=>{ee([...H,{content:""}])},className:"w-full",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"})," Add Text"]})]})]}),"listening"===F&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"part1"===R?"Short Conversations":"part2"===R?"Dialogue":"News and Announcements"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"audio-url",children:"Audio File"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(x.p,{id:"audio-url",value:ei,onChange:e=>{er(e.target.value),ex("")},placeholder:"Enter audio URL or path",className:"flex-1"}),(0,a.jsxs)("label",{className:"cursor-pointer",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md bg-white hover:bg-gray-50",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 mr-2"})," Upload"]}),(0,a.jsx)("input",{type:"file",accept:"audio/*",className:"hidden",onChange:e=>{let t=e.target.files[0];if(t){if(!t.type.startsWith("audio/")){ex("Please upload an audio file (MP3, WAV, etc.)");return}ec(t),er(URL.createObjectURL(t)),ex("")}}})]})]}),ei&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-1",children:"Audio Preview:"}),(0,a.jsxs)("audio",{controls:!0,className:"w-full",children:[(0,a.jsx)("source",{src:ei}),"Your browser does not support the audio element."]})]}),em&&(0,a.jsx)("p",{className:"text-sm text-red-500 mt-1",children:em}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:'You can either upload an audio file or enter a URL. For demo purposes, you can enter a placeholder URL like "/audio/exercise-name.mp3"'})]})]}),"part2"===R&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"transcript",children:"Transcript"}),(0,a.jsx)(u.T,{id:"transcript",value:ed,onChange:e=>eo(e.target.value),placeholder:"Enter the audio transcript",className:"min-h-[200px]"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(h.Label,{children:"Questions"}),Q.map((e,t)=>{var s,l,i;return(0,a.jsxs)("div",{className:"p-4 border rounded-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("h4",{className:"font-medium",children:["Question ",t+1]}),(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"sm",onClick:()=>eI(t),disabled:Q.length<=1,children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"question-".concat(t),children:"Question Text"}),(0,a.jsx)(x.p,{id:"question-".concat(t),value:e,onChange:e=>eU(t,e.target.value),placeholder:"Enter question text"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(h.Label,{children:"Options"}),(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"sm",onClick:()=>eP(t),children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})]}),null===(s=Y[t])||void 0===s?void 0:s.map((e,s)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(x.p,{value:e,onChange:e=>eV(t,s,e.target.value),placeholder:"Option ".concat(s+1)}),(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"sm",onClick:()=>eD(t,s),disabled:Y[t].length<=1,children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})]},s))]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"correct-answer-".concat(t),children:"Correct Answer"}),(0,a.jsxs)(p.l6,{value:null===(l=J[t])||void 0===l?void 0:l.toString(),onValueChange:e=>eG(t,e),children:[(0,a.jsx)(p.bq,{id:"correct-answer-".concat(t),children:(0,a.jsx)(p.yv,{placeholder:"Select correct answer"})}),(0,a.jsx)(p.gC,{children:null===(i=Y[t])||void 0===i?void 0:i.map((e,t)=>(0,a.jsxs)(p.eb,{value:t.toString(),children:["Option ",t+1]},t))})]})]})]})]},t)}),(0,a.jsxs)(m.$,{type:"button",variant:"outline",onClick:eO,className:"w-full",disabled:"part1"===R&&Q.length>=5||"part2"===R&&Q.length>=10||"part3"===R&&Q.length>=6,children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"})," Add Question"]}),"part1"===R&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Maximum 5 questions for Teil 1"}),"part2"===R&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Maximum 10 questions for Teil 2"}),"part3"===R&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Maximum 6 questions for Teil 3"})]})]}),"grammar"===F&&"part1"===R&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Fill in the Blanks"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(h.Label,{children:"Text with Blanks"}),(0,a.jsxs)("div",{className:"p-4 border rounded-md",children:[eh.map((e,t)=>(0,a.jsx)("div",{className:"mb-2",children:"text"===e.type?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"text-segment-".concat(t),children:"Text Segment"}),(0,a.jsx)(x.p,{id:"text-segment-".concat(t),value:e.content,onChange:e=>eQ(t,e.target.value),placeholder:"Enter text segment"})]}):(0,a.jsx)("div",{className:"flex items-center justify-center p-2 bg-gray-100 rounded-md",children:(0,a.jsxs)("span",{className:"text-gray-500",children:["Blank ",e.blankIndex+1]})})},t)),(0,a.jsxs)(m.$,{type:"button",variant:"outline",onClick:eX,className:"w-full mt-4",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"})," Add Blank"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(h.Label,{children:"Blanks Options"}),ep.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"p-4 border rounded-md",children:[(0,a.jsxs)("h4",{className:"font-medium mb-2",children:["Blank ",t+1," Options"]}),(0,a.jsx)("div",{className:"space-y-2",children:e.options.map((e,s)=>(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(x.p,{value:e,onChange:e=>e_(t,s,e.target.value),placeholder:"Option ".concat(s+1)})},s))}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(h.Label,{htmlFor:"correct-blank-".concat(t),children:"Correct Option"}),(0,a.jsxs)(p.l6,{value:null===(s=J[t])||void 0===s?void 0:s.toString(),onValueChange:e=>eG(t,e),children:[(0,a.jsx)(p.bq,{id:"correct-blank-".concat(t),children:(0,a.jsx)(p.yv,{placeholder:"Select correct option"})}),(0,a.jsx)(p.gC,{children:e.options.map((e,t)=>(0,a.jsxs)(p.eb,{value:t.toString(),children:["Option ",t+1]},t))})]})]})]},t)})]})]}),"grammar"===F&&"part2"===R&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Word Formation"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(h.Label,{children:"Text with Blanks"}),(0,a.jsxs)("div",{className:"p-4 border rounded-md",children:[eh.map((e,t)=>(0,a.jsx)("div",{className:"mb-2",children:"text"===e.type?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"text-segment-".concat(t),children:"Text Segment"}),(0,a.jsx)(x.p,{id:"text-segment-".concat(t),value:e.content,onChange:e=>eQ(t,e.target.value),placeholder:"Enter text segment"})]}):(0,a.jsx)("div",{className:"flex items-center justify-center p-2 bg-gray-100 rounded-md",children:(0,a.jsxs)("span",{className:"text-gray-500",children:["Blank ",e.blankIndex+1]})})},t)),(0,a.jsxs)(m.$,{type:"button",variant:"outline",onClick:eX,className:"w-full mt-4",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"})," Add Blank"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(h.Label,{children:"Blanks Correct Words"}),ep.map((e,t)=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(h.Label,{htmlFor:"correct-word-".concat(t),children:["Correct Word for Blank ",t+1]}),(0,a.jsx)(x.p,{id:"correct-word-".concat(t),value:ep[t].options[0],onChange:e=>e_(t,0,e.target.value),placeholder:"Enter correct word"})]},t))]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(h.Label,{children:"Word Bank"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:ev.map((e,t)=>(0,a.jsx)(x.p,{value:e,onChange:e=>eY(t,e.target.value),placeholder:"Word ".concat(t+1)},t))})]})]}),"writing"===F&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"part1"===R?"Formal Letter/Email":"Essay"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"writing-prompt",children:"Writing Prompt"}),(0,a.jsx)(u.T,{id:"writing-prompt",value:eA,onChange:e=>eL(e.target.value),placeholder:"Enter the writing prompt",className:"min-h-[150px]"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(h.Label,{children:"Evaluation Criteria"}),(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{eE([...eS,""])},children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})]}),eS.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(x.p,{value:e,onChange:e=>eJ(t,e.target.value),placeholder:"Criterion ".concat(t+1)}),(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"sm",onClick:()=>eZ(t),disabled:eS.length<=1,children:(0,a.jsx)(f.A,{className:"h-4 w-4"})})]},t))]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)(n(),{href:"/admin",children:(0,a.jsx)(m.$,{variant:"outline",type:"button",children:"Cancel"})}),(0,a.jsx)(m.$,{type:"submit",children:"Update Exercise"})]})]})]})]}):null}},5781:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(8081);function l(e){let{fullScreen:t=!0}=e;return(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center ".concat(t?"h-screen":"h-64"),children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-emerald-500"}),(0,a.jsx)("p",{className:"mt-4 text-emerald-700 font-medium",children:"Loading..."})]})}},6535:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(2149),l=s(9684);function i(){return(0,a.useEffect)(()=>{(0,l.lK)(),(0,l.Yq)()},[]),null}},7890:(e,t,s)=>{"use strict";s.d(t,{Label:()=>d});var a=s(8081),l=s(2149),i=s(7447),r=s(3484),n=s(7687);let c=(0,r.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(i.b,{ref:t,className:(0,n.cn)(c(),s),...l})});d.displayName=i.b.displayName},9399:(e,t,s)=>{Promise.resolve().then(s.bind(s,5436))},9684:(e,t,s)=>{"use strict";let a,l;s.d(t,{WV:()=>x,YP:()=>u,Yq:()=>p,lK:()=>h});var i=s(3124),r=s(6558),n=s(7033),c=s(1775);try{a=(0,i.Wp)({apiKey:"AIzaSyCVgDozEtEnz1BWZJfS-0-KkRWntCiNt8Y",authDomain:"telcmate.firebaseapp.com",projectId:"telcmate",storageBucket:"telcmate.firebasestorage.app",messagingSenderId:"945468433513",appId:"1:945468433513:web:88cc94b0976589a63f6ef8",measurementId:"G-ZRG66F2W9R"}),l=(0,r.aU)(a),(0,n.xI)(a),(0,c.TT)().then(e=>e&&(0,c.P5)(a))}catch(e){console.error("Error initializing Firebase:",e)}let d=(0,r.rJ)(l,"exercises"),o=(0,r.rJ)(l,"users"),m=(0,r.rJ)(l,"settings");async function x(e){return{id:(await (0,r.gS)(d,e)).id,...e}}async function h(){if((await (0,r.GG)(o)).empty)for(let e of[{name:"Admin User",code:"admin123",isAdmin:!0,isModerator:!1,isDemo:!1,role:"Admin"},{name:"Moderator User",code:"mod123",isAdmin:!1,isModerator:!0,isDemo:!1,role:"Moderator"},{name:"Test User",code:"user123",isAdmin:!1,isModerator:!1,isDemo:!1,role:"Student"},{name:"Demo User",code:"demo123",isAdmin:!1,isModerator:!1,isDemo:!0,role:"Student"}])await (0,r.gS)(o,e)}async function u(e){let t=(0,r.P)(o,(0,r._M)("code","==",e)),s=await (0,r.GG)(t);if(!s.empty){let e=s.docs[0];return{id:e.id,...e.data()}}return null}async function p(){(await (0,r.GG)(m)).empty&&await (0,r.BN)((0,r.H9)(m,"system"),{siteTitle:"Telc Mate",allowRegistration:!1,maintenanceMode:!1,defaultTimeLimit:{reading:20,listening:15,grammar:15,writing:30},language:"en",showCorrectAnswers:!0,allowTestRetake:!0,demoAccessLevel:"limited"})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2703,3136,6505,7950,6872,7043,842,117,6017,5515,497,954,7358],()=>t(9399)),_N_E=e.O()}]);