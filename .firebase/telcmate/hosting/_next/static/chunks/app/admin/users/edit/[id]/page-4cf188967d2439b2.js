(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2464],{900:(e,s,t)=>{"use strict";t.d(s,{p:()=>d});var r=t(8081),a=t(2149),i=t(7687);let d=a.forwardRef((e,s)=>{let{className:t,type:a,...d}=e;return(0,r.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...d})});d.displayName="Input"},3621:(e,s,t)=>{"use strict";t.d(s,{A:()=>v});var r=t(8081),a=t(2149),i=t(7950),d=t.n(i),l=t(9651),n=t(5160),o=t(1411),c=t(8822),m=t(6893),u=t(1107),f=t(459),x=t(3585),h=t(6546),p=t(1441),g=t(5844);function v(){let e=(0,l.useRouter)(),{toast:s}=(0,g.dj)(),[t,i]=(0,a.useState)(!1),[v,b]=(0,a.useState)(!1),N=(0,a.useRef)(null),[j,y]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let e="true"===localStorage.getItem("isAdmin"),s="true"===localStorage.getItem("isDemo");i(e),b(s),document.querySelectorAll('[data-header-id="dashboard-header"]').length>1&&y(!1)},[]),j)?(0,r.jsx)("header",{className:"bg-white border-b","data-header-id":"dashboard-header",ref:N,children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)(d(),{href:"/dashboard",className:"text-2xl font-bold text-emerald-600 flex items-center",children:[(0,r.jsx)(o.A,{className:"mr-2 h-6 w-6"}),"TELC B2 Prep"]})}),(0,r.jsxs)("nav",{className:"hidden md:flex items-center space-x-6",children:[(0,r.jsxs)(d(),{href:"/dashboard",className:"text-gray-600 hover:text-emerald-600 flex items-center",children:[(0,r.jsx)(c.A,{className:"mr-1 h-4 w-4"}),"Dashboard"]}),(0,r.jsxs)(d(),{href:"/dashboard/reading",className:"text-gray-600 hover:text-emerald-600 flex items-center",children:[(0,r.jsx)(o.A,{className:"mr-1 h-4 w-4"}),"Reading"]}),(0,r.jsxs)(d(),{href:"/dashboard/listening",className:"text-gray-600 hover:text-emerald-600 flex items-center",children:[(0,r.jsx)(m.A,{className:"mr-1 h-4 w-4"}),"Listening"]}),(0,r.jsxs)(d(),{href:"/dashboard/grammar",className:"text-gray-600 hover:text-emerald-600 flex items-center",children:[(0,r.jsx)(u.A,{className:"mr-1 h-4 w-4"}),"Grammar"]}),(0,r.jsxs)(d(),{href:"/dashboard/writing",className:"text-gray-600 hover:text-emerald-600 flex items-center",children:[(0,r.jsx)(f.A,{className:"mr-1 h-4 w-4"}),"Writing"]}),(0,r.jsxs)(d(),{href:"/contact",className:"text-gray-600 hover:text-emerald-600 flex items-center",children:[(0,r.jsx)(x.A,{className:"mr-1 h-4 w-4"}),"Contact"]}),t&&(0,r.jsxs)(d(),{href:"/admin",className:"text-gray-600 hover:text-emerald-600 flex items-center",children:[(0,r.jsx)(h.A,{className:"mr-1 h-4 w-4"}),"Admin"]})]}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>{localStorage.removeItem("userCode"),localStorage.removeItem("isAdmin"),localStorage.removeItem("isDemo"),s({title:"Logged out",description:"You have been successfully logged out."}),e.push("/")},className:"flex items-center",children:[(0,r.jsx)(p.A,{className:"mr-1 h-4 w-4"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Logout"})]})})]})})}):null}},5160:(e,s,t)=>{"use strict";t.d(s,{$:()=>o});var r=t(8081),a=t(2149),i=t(640),d=t(3484),l=t(7687);let n=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,s)=>{let{className:t,variant:a,size:d,asChild:o=!1,...c}=e,m=o?i.DX:"button";return(0,r.jsx)(m,{className:(0,l.cn)(n({variant:a,size:d,className:t})),ref:s,...c})});o.displayName="Button"},5650:(e,s,t)=>{"use strict";t.d(s,{x:()=>r});class r{static isAdmin(e){return!0===e.isAdmin||"Admin"===e.role}static isModerator(e){return!0===e.isModerator||"Moderator"===e.role||this.isAdmin(e)}static canAddUsers(e){return this.isModerator(e)}static canEditUsers(e){return this.isModerator(e)}static canRemoveUsers(e){return this.isAdmin(e)}static canAddExercises(e){return this.isModerator(e)}static canEditExercises(e){return this.isModerator(e)}static canRemoveExercises(e){return this.isAdmin(e)}static canAccessSettings(e){return this.isAdmin(e)}static canEditSettings(e){return this.isAdmin(e)}}},5781:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var r=t(8081);function a(e){let{fullScreen:s=!0}=e;return(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center ".concat(s?"h-screen":"h-64"),children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-emerald-500"}),(0,r.jsx)("p",{className:"mt-4 text-emerald-700 font-medium",children:"Loading..."})]})}},5844:(e,s,t)=>{"use strict";t.d(s,{dj:()=>u});var r=t(2149);let a=0,i=new Map,d=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},l=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?d(t):e.toasts.forEach(e=>{d(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},n=[],o={toasts:[]};function c(e){o=l(o,e),n.forEach(e=>{e(o)})}function m(e){let{...s}=e,t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,s]=r.useState(o);return r.useEffect(()=>(n.push(s),()=>{let e=n.indexOf(s);e>-1&&n.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},6280:(e,s,t)=>{Promise.resolve().then(t.bind(t,7903))},6810:(e,s,t)=>{"use strict";t.d(s,{BT:()=>o,Wu:()=>c,ZB:()=>n,Zp:()=>d,aR:()=>l,wL:()=>m});var r=t(8081),a=t(2149),i=t(7687);let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});d.displayName="Card";let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...a})});l.displayName="CardHeader";let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});n.displayName="CardTitle";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",t),...a})});c.displayName="CardContent";let m=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t),...a})});m.displayName="CardFooter"},7687:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i});var r=t(6522),a=t(4483);function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.QP)((0,r.$)(s))}},7890:(e,s,t)=>{"use strict";t.d(s,{Label:()=>o});var r=t(8081),a=t(2149),i=t(7447),d=t(3484),l=t(7687);let n=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.b,{ref:s,className:(0,l.cn)(n(),t),...a})});o.displayName=i.b.displayName},7903:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var r=t(8081),a=t(2149),i=t(9651),d=t(3621),l=t(6810),n=t(5160),o=t(900),c=t(7890),m=t(8747),u=t(8091),f=t(5844),x=t(5781),h=t(5650);function p(e){let{params:s}=e,t=(0,i.useRouter)(),{toast:p}=(0,f.dj)(),[g,v]=(0,a.useState)(""),[b,N]=(0,a.useState)(""),[j,y]=(0,a.useState)("student"),[S,A]=(0,a.useState)(!1),[w,E]=(0,a.useState)(!0),[C,T]=(0,a.useState)(!1),[R,D]=(0,a.useState)(""),[I,k]=(0,a.useState)(null),[_,L]=(0,a.useState)(null);if((0,a.useEffect)(()=>{let e=localStorage.getItem("userCode"),r=localStorage.getItem("users");if(r){let a=JSON.parse(r),i=a.find(s=>s.code===e);if(i){if(k(i),!h.x.canEditUsers(i)){p({title:"Permission Denied",description:"You don't have permission to edit users.",variant:"destructive"}),t.push("/dashboard");return}let e=a.find(e=>e.id===s.id);e?(L(e),v(e.name),N(e.code),D(e.code),e.role?y(e.role):e.isAdmin?y("admin"):e.isModerator?y("moderator"):y("student"),A(e.isDemo||!1)):(p({title:"Error",description:"User not found.",variant:"destructive"}),t.push("/admin"))}else t.push("/dashboard")}else t.push("/dashboard");E(!1)},[s.id,t,p]),w)return(0,r.jsx)(x.A,{});if(!I||!_)return null;let O=I.isAdmin||"admin"===I.role;return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(d.A,{}),(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Edit User"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Update user information"})]}),(0,r.jsxs)(l.Zp,{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"User Details"}),(0,r.jsx)(l.BT,{children:"Edit the details for this user"})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),T(!0),!g.trim()||!b.trim()){p({title:"Error",description:"Please fill in all required fields.",variant:"destructive"}),T(!1);return}let r=localStorage.getItem("users"),a=r?JSON.parse(r):[];if(b!==R&&a.some(e=>e.code===b)){p({title:"Error",description:"User code already exists. Please use a different code.",variant:"destructive"}),T(!1);return}let i=a.map(e=>e.id===s.id?{...e,name:g,code:b,isAdmin:"admin"===j,isModerator:"moderator"===j,isDemo:S,role:j}:e);localStorage.setItem("users",JSON.stringify(i)),p({title:"Success",description:"User updated successfully."}),t.push("/admin")},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.Label,{htmlFor:"name",children:"Full Name"}),(0,r.jsx)(o.p,{id:"name",placeholder:"Enter user's full name",value:g,onChange:e=>v(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.Label,{htmlFor:"code",children:"User Code"}),(0,r.jsx)(o.p,{id:"code",placeholder:"Enter a unique code for the user",value:b,onChange:e=>N(e.target.value),required:!0}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"This code will be used for login."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.Label,{children:"User Role"}),(0,r.jsxs)(u.z,{value:j,onValueChange:y,className:"flex flex-col space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(u.C,{value:"student",id:"role-student"}),(0,r.jsx)(c.Label,{htmlFor:"role-student",className:"cursor-pointer",children:"Student"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(u.C,{value:"moderator",id:"role-moderator"}),(0,r.jsx)(c.Label,{htmlFor:"role-moderator",className:"cursor-pointer",children:"Moderator"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"(Can add and edit users/exercises)"})]}),O&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(u.C,{value:"admin",id:"role-admin"}),(0,r.jsx)(c.Label,{htmlFor:"role-admin",className:"cursor-pointer",children:"Admin"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"(Full access to all features)"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(m.S,{id:"isDemo",checked:S,onCheckedChange:A}),(0,r.jsx)(c.Label,{htmlFor:"isDemo",className:"cursor-pointer",children:"Demo User"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 ml-2",children:"(Demo users have limited access)"})]}),(0,r.jsxs)("div",{className:"pt-4",children:[(0,r.jsx)(n.$,{type:"submit",className:"mr-2",disabled:C,children:C?"Saving...":"Save Changes"}),(0,r.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>t.push("/admin"),children:"Cancel"})]})]})})]})]})]})}},8091:(e,s,t)=>{"use strict";t.d(s,{C:()=>o,z:()=>n});var r=t(8081),a=t(2149),i=t(5562),d=t(8022),l=t(7687);let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.bL,{className:(0,l.cn)("grid gap-2",t),...a,ref:s})});n.displayName=i.bL.displayName;let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.q7,{ref:s,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,r.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(d.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=i.q7.displayName},8747:(e,s,t)=>{"use strict";t.d(s,{S:()=>n});var r=t(8081),a=t(2149),i=t(1573),d=t(6722),l=t(7687);let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.bL,{ref:s,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:(0,r.jsx)(i.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})})});n.displayName=i.bL.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[6505,7950,2153,5308,497,954,7358],()=>s(6280)),_N_E=e.O()}]);