(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4631],{301:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,q:()=>i});var a=r(2149),s=r(8081);function i(e,t){let r=a.createContext(t),i=e=>{let{children:t,...i}=e,l=a.useMemo(()=>i,Object.values(i));return(0,s.jsx)(r.Provider,{value:l,children:t})};return i.displayName=e+"Provider",[i,function(s){let i=a.useContext(r);if(i)return i;if(void 0!==t)return t;throw Error(`\`${s}\` must be used within \`${e}\``)}]}function l(e,t=[]){let r=[],i=()=>{let t=r.map(e=>a.createContext(e));return function(r){let s=r?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...r,[e]:s}}),[r,s])}};return i.scopeName=e,[function(t,i){let l=a.createContext(i),n=r.length;r=[...r,i];let c=t=>{let{scope:r,children:i,...c}=t,o=r?.[e]?.[n]||l,d=a.useMemo(()=>c,Object.values(c));return(0,s.jsx)(o.Provider,{value:d,children:i})};return c.displayName=t+"Provider",[c,function(r,s){let c=s?.[e]?.[n]||l,o=a.useContext(c);if(o)return o;if(void 0!==i)return i;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=r.reduce((t,{useScope:r,scopeName:a})=>{let s=r(e)[`__scope${a}`];return{...t,...s}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}(i,...t)]}},459:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},493:(e,t,r)=>{"use strict";function a(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),!1===r||!a.defaultPrevented)return t?.(a)}}r.d(t,{m:()=>a})},900:(e,t,r)=>{"use strict";r.d(t,{p:()=>l});var a=r(8081),s=r(2149),i=r(7687);let l=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...l})});l.displayName="Input"},1107:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1411:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]])},1441:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},2522:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2773:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(8081),s=r(2149),i=r(9651),l=r(7950),n=r.n(l),c=r(3621),o=r(6535),d=r(6810),u=r(5160),m=r(900),p=r(7890),f=r(4666),x=r(5904),h=r(2522),v=r(3210),y=r(5844),j=r(9684),g=r(5781);function b(){let e=(0,i.useRouter)(),{toast:t}=(0,y.dj)(),[r,l]=(0,s.useState)(!0),[b,N]=(0,s.useState)(!1),[w,C]=(0,s.useState)({type:"reading",part:"part1",title:"",description:"",timeLimit:15,content:"",texts:[],prompt:"",evaluationCriteria:[]});(0,s.useEffect)(()=>{let t="true"===localStorage.getItem("isAdmin");N(t),t||e.push("/"),l(!1)},[e]);let A=async r=>{r.preventDefault(),l(!0);try{let r={...w,id:"".concat(w.type,"-").concat(w.part,"-").concat(Date.now())};await (0,j.WV)(r),t({title:"Exercise Created",description:"The exercise has been created successfully."}),e.push("/admin")}catch(e){t({title:"Error",description:"Failed to create exercise. Please try again.",variant:"destructive"})}finally{l(!1)}},k=(e,t,r)=>{let a=[...w.texts];a[e]={...a[e],[t]:r},C({...w,texts:a})},M=e=>{let t=w.texts.filter((t,r)=>r!==e);C({...w,texts:t})},R=(e,t)=>{let r=[...w.evaluationCriteria];r[e]=t,C({...w,evaluationCriteria:r})},S=e=>{let t=w.evaluationCriteria.filter((t,r)=>r!==e);C({...w,evaluationCriteria:t})};return r?(0,a.jsx)(g.A,{}):b?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(o.A,{}),(0,a.jsx)(c.A,{}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Create New Exercise"}),(0,a.jsx)(n(),{href:"/admin",children:(0,a.jsx)(u.$,{variant:"outline",children:"Back to Dashboard"})})]}),(0,a.jsxs)("form",{onSubmit:A,className:"space-y-8",children:[(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsx)(d.ZB,{children:"Basic Information"})}),(0,a.jsxs)(d.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.Label,{htmlFor:"type",children:"Exercise Type"}),(0,a.jsxs)(x.l6,{value:w.type,onValueChange:e=>C({...w,type:e}),children:[(0,a.jsx)(x.bq,{children:(0,a.jsx)(x.yv,{placeholder:"Select type"})}),(0,a.jsxs)(x.gC,{children:[(0,a.jsx)(x.eb,{value:"reading",children:"Reading"}),(0,a.jsx)(x.eb,{value:"listening",children:"Listening"}),(0,a.jsx)(x.eb,{value:"grammar",children:"Grammar"}),(0,a.jsx)(x.eb,{value:"writing",children:"Writing"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.Label,{htmlFor:"part",children:"Part"}),(0,a.jsxs)(x.l6,{value:w.part,onValueChange:e=>C({...w,part:e}),children:[(0,a.jsx)(x.bq,{children:(0,a.jsx)(x.yv,{placeholder:"Select part"})}),(0,a.jsxs)(x.gC,{children:[(0,a.jsx)(x.eb,{value:"part1",children:"Part 1"}),(0,a.jsx)(x.eb,{value:"part2",children:"Part 2"}),"writing"!==w.type&&(0,a.jsx)(x.eb,{value:"part3",children:"Part 3"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.Label,{htmlFor:"title",children:"Title"}),(0,a.jsx)(m.p,{id:"title",value:w.title,onChange:e=>C({...w,title:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.Label,{htmlFor:"description",children:"Description"}),(0,a.jsx)(f.T,{id:"description",value:w.description,onChange:e=>C({...w,description:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.Label,{htmlFor:"timeLimit",children:"Time Limit (minutes)"}),(0,a.jsx)(m.p,{id:"timeLimit",type:"number",min:"1",value:w.timeLimit,onChange:e=>C({...w,timeLimit:parseInt(e.target.value)}),required:!0})]})]})]}),"reading"===w.type&&"part1"===w.part&&(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsx)(d.ZB,{children:"Reading Part 1: Title Matching"})}),(0,a.jsxs)(d.Wu,{className:"space-y-4",children:[w.texts.map((e,t)=>(0,a.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("h3",{className:"font-medium",children:["Text ",t+1]}),(0,a.jsx)(u.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>M(t),children:(0,a.jsx)(h.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.Label,{children:"Text Content"}),(0,a.jsx)(f.T,{value:e.content,onChange:e=>k(t,"content",e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.Label,{children:"Correct Title"}),(0,a.jsx)(m.p,{value:e.correctTitle,onChange:e=>k(t,"correctTitle",e.target.value),required:!0})]})]},t)),(0,a.jsxs)(u.$,{type:"button",onClick:()=>{C({...w,texts:[...w.texts,{content:"",correctTitle:""}]})},className:"w-full",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Add Text"]})]})]}),"writing"===w.type&&(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsx)(d.ZB,{children:"Writing Exercise"})}),(0,a.jsxs)(d.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.Label,{htmlFor:"prompt",children:"Writing Prompt"}),(0,a.jsx)(f.T,{id:"prompt",value:w.prompt,onChange:e=>C({...w,prompt:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(p.Label,{children:"Evaluation Criteria"}),(0,a.jsxs)(u.$,{type:"button",onClick:()=>{C({...w,evaluationCriteria:[...w.evaluationCriteria,""]})},size:"sm",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Add Criterion"]})]}),w.evaluationCriteria.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(m.p,{value:e,onChange:e=>R(t,e.target.value),required:!0}),(0,a.jsx)(u.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(t),children:(0,a.jsx)(h.A,{className:"h-4 w-4"})})]},t))]})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(u.$,{type:"submit",disabled:r,children:r?"Creating...":"Create Exercise"})})]})]})]}):null}},3077:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});var a=r(2149),s=globalThis?.document?a.useLayoutEffect:()=>{}},3210:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4004:(e,t,r)=>{"use strict";r.d(t,{jH:()=>i});var a=r(2149);r(8081);var s=a.createContext(void 0);function i(e){let t=a.useContext(s);return e||t||"ltr"}},4245:(e,t,r)=>{"use strict";r.d(t,{N:()=>c});var a=r(2149),s=r(301),i=r(4426),l=r(640),n=r(8081);function c(e){let t=e+"CollectionProvider",[r,c]=(0,s.A)(t),[o,d]=r(t,{collectionRef:{current:null},itemMap:new Map}),u=e=>{let{scope:t,children:r}=e,s=a.useRef(null),i=a.useRef(new Map).current;return(0,n.jsx)(o,{scope:t,itemMap:i,collectionRef:s,children:r})};u.displayName=t;let m=e+"CollectionSlot",p=a.forwardRef((e,t)=>{let{scope:r,children:a}=e,s=d(m,r),c=(0,i.s)(t,s.collectionRef);return(0,n.jsx)(l.DX,{ref:c,children:a})});p.displayName=m;let f=e+"CollectionItemSlot",x="data-radix-collection-item",h=a.forwardRef((e,t)=>{let{scope:r,children:s,...c}=e,o=a.useRef(null),u=(0,i.s)(t,o),m=d(f,r);return a.useEffect(()=>(m.itemMap.set(o,{ref:o,...c}),()=>void m.itemMap.delete(o))),(0,n.jsx)(l.DX,{[x]:"",ref:u,children:s})});return h.displayName=f,[{Provider:u,Slot:p,ItemSlot:h},function(t){let r=d(e+"CollectionConsumer",t);return a.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll("[".concat(x,"]")));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},c]}},4593:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var a=r(2149);function s(e){let t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>(...e)=>t.current?.(...e),[])}},4666:(e,t,r)=>{"use strict";r.d(t,{T:()=>l});var a=r(8081),s=r(2149),i=r(7687);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});l.displayName="Textarea"},5008:(e,t,r)=>{"use strict";r.d(t,{i:()=>i});var a=r(2149),s=r(4593);function i({prop:e,defaultProp:t,onChange:r=()=>{}}){let[i,l]=function({defaultProp:e,onChange:t}){let r=a.useState(e),[i]=r,l=a.useRef(i),n=(0,s.c)(t);return a.useEffect(()=>{l.current!==i&&(n(i),l.current=i)},[i,l,n]),r}({defaultProp:t,onChange:r}),n=void 0!==e,c=n?e:i,o=(0,s.c)(r);return[c,a.useCallback(t=>{if(n){let r="function"==typeof t?t(e):t;r!==e&&o(r)}else l(t)},[n,e,l,o])]}},5781:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(8081);function s(e){let{fullScreen:t=!0}=e;return(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center ".concat(t?"h-screen":"h-64"),children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-emerald-500"}),(0,a.jsx)("p",{className:"mt-4 text-emerald-700 font-medium",children:"Loading..."})]})}},6535:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(2149),s=r(9684);function i(){return(0,a.useEffect)(()=>{(0,s.lK)(),(0,s.Yq)()},[]),null}},6546:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6893:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]])},6915:(e,t,r)=>{"use strict";r.d(t,{B:()=>c});var a,s=r(2149),i=r(3077),l=(a||(a=r.t(s,2)))["useId".toString()]||(()=>void 0),n=0;function c(e){let[t,r]=s.useState(l());return(0,i.N)(()=>{e||r(e=>e??String(n++))},[e]),e||(t?`radix-${t}`:"")}},7447:(e,t,r)=>{"use strict";r.d(t,{b:()=>n});var a=r(2149),s=r(9402),i=r(8081),l=a.forwardRef((e,t)=>(0,i.jsx)(s.sG.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var n=l},7890:(e,t,r)=>{"use strict";r.d(t,{Label:()=>o});var a=r(8081),s=r(2149),i=r(7447),l=r(3484),n=r(7687);let c=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.b,{ref:t,className:(0,n.cn)(c(),r),...s})});o.displayName=i.b.displayName},8820:(e,t,r)=>{Promise.resolve().then(r.bind(r,2773))},8822:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1018).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},9402:(e,t,r)=>{"use strict";r.d(t,{hO:()=>c,sG:()=>n});var a=r(2149),s=r(4632),i=r(640),l=r(8081),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=a.forwardRef((e,r)=>{let{asChild:a,...s}=e,n=a?i.DX:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(n,{...s,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function c(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}},9684:(e,t,r)=>{"use strict";let a,s;r.d(t,{WV:()=>m,YP:()=>f,Yq:()=>x,lK:()=>p});var i=r(3124),l=r(6558),n=r(7033),c=r(1775);try{a=(0,i.Wp)({apiKey:"AIzaSyCVgDozEtEnz1BWZJfS-0-KkRWntCiNt8Y",authDomain:"telcmate.firebaseapp.com",projectId:"telcmate",storageBucket:"telcmate.firebasestorage.app",messagingSenderId:"945468433513",appId:"1:945468433513:web:88cc94b0976589a63f6ef8",measurementId:"G-ZRG66F2W9R"}),s=(0,l.aU)(a),(0,n.xI)(a),(0,c.TT)().then(e=>e&&(0,c.P5)(a))}catch(e){console.error("Error initializing Firebase:",e)}let o=(0,l.rJ)(s,"exercises"),d=(0,l.rJ)(s,"users"),u=(0,l.rJ)(s,"settings");async function m(e){return{id:(await (0,l.gS)(o,e)).id,...e}}async function p(){if((await (0,l.GG)(d)).empty)for(let e of[{name:"Admin User",code:"admin123",isAdmin:!0,isModerator:!1,isDemo:!1,role:"Admin"},{name:"Moderator User",code:"mod123",isAdmin:!1,isModerator:!0,isDemo:!1,role:"Moderator"},{name:"Test User",code:"user123",isAdmin:!1,isModerator:!1,isDemo:!1,role:"Student"},{name:"Demo User",code:"demo123",isAdmin:!1,isModerator:!1,isDemo:!0,role:"Student"}])await (0,l.gS)(d,e)}async function f(e){let t=(0,l.P)(d,(0,l._M)("code","==",e)),r=await (0,l.GG)(t);if(!r.empty){let e=r.docs[0];return{id:e.id,...e.data()}}return null}async function x(){(await (0,l.GG)(u)).empty&&await (0,l.BN)((0,l.H9)(u,"system"),{siteTitle:"Telc Mate",allowRegistration:!1,maintenanceMode:!1,defaultTimeLimit:{reading:20,listening:15,grammar:15,writing:30},language:"en",showCorrectAnswers:!0,allowTestRetake:!0,demoAccessLevel:"limited"})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2703,3136,6505,7950,6872,7043,842,5515,497,954,7358],()=>t(8820)),_N_E=e.O()}]);